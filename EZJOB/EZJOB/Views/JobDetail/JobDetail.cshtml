
@model EZJOB.Models.JobDetails
@{
    Layout = null;
}
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Responsive Header and Footer with Bootstrap</title>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">


<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link href="~/CSS/salert.css" rel="stylesheet" />
<script src="~/JS/sweetalert.js"></script>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<style>
    .navbar-nav .nav-link {
        color: black !important;
        font-weight: 500;
    }

    .navbar {
        background-color: aliceblue;
    }

    body {
        margin-top: 0px !important;
    }
</style>
@using (Html.BeginForm())
{
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

    <nav class="navbar navbar-expand-sm  navbar-dark">
        <!-- Brand/logo -->
        <a class="navbar-brand" href="#">
            <img src="https://ezwaretechnologies.com///wp-content/uploads/2014/07/ezware_header_logo.png" alt="logo" style="width:150px;">
        </a>

        <!-- Links -->
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-expanded="false">

                    @HttpContext.Current.Session["Empname"].ToString()
                </a>
                <div class="dropdown-menu" style="min-width: 0px !important; padding: 0px !important;margin:0px!important">
                    <a class="dropdown-item" href="@Url.Action("Login", "Login")">Logout</a>
                </div>
            </li>

        </ul>
    </nav>

    <div class="container ">
        <div class="row align-items-end mb-4 pb-2" style="display:none">
            <div class="col-md-8">
                <div class="section-title text-center text-md-start">
                    <h4 class="title mb-4">Find the perfect jobs</h4>
                    <p class="text-muted mb-0 para-desc">Start work with Leaping. Build responsive, mobile-first projects on the web with the world's most popular front-end component library.</p>
                </div>
            </div><!--end col-->

            <div class="col-md-4 mt-4 mt-sm-0 d-none d-md-block">
                <div class="text-center text-md-end">
                    <a href="#" class="text-primary">View more Jobs <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right fea icon-sm"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></a>
                </div>
            </div><!--end col-->
        </div><!--end row-->


        <div class="row">


            @foreach (var item in Model.list)
            {
                <input type="hidden" id="TrId" value="@item.Id">

                <div class="col-lg-12 col-md-12 col-12 mt-4 pt-2">
                    <div class="card border-0 bg-light rounded shadow">
                        <div class="card-body p-4">
                            <div style="margin-top">
                                <span class="text-muted d-block"> <a href="@Url.Action("Home", "Home")" class="text-muted"><i class="fa fa-arrow-left" aria-hidden="true"></i></a></span><br />
                            </div>
                            @if (item.Status == "Open")
                            {
                                <span class="badge rounded-pill bg-primary float-md-end mb-3 mb-sm-0" style="background-color: #00aba9!important;color:#fff!important">@item.Status</span>
                            }
                            else if (item.Status == "Closed")
                            {
                                <span class="badge rounded-pill float-md-end mb-3 mb-sm-0" style="background-color: #b91d47 !important; color: #fff !important ">@item.Status</span>
                            }
                            else if (item.Status == "Paused")
                            {
                                <span class="badge rounded-pill float-md-end mb-3 mb-sm-0" style="background-color: #e8c3b9 !important; color: #fff !important ">@item.Status</span>
                            }
                            else if (item.Status == "Inprogress")
                            {
                                <span class="badge rounded-pill float-md-end mb-3 mb-sm-0" style="background-color: #2b5797 !important; color: #fff !important ">@item.Status</span>
                            }
                            <h5>@item.JobId : @item.Title</h5>
                            @if (item.CustomerLat != "" && item.CustomerLat != null)
                            {
                                <i class="fa fa-map-marker" aria-hidden="true" style="font-size: 24px; cursor: pointer; margin-bottom: 15px; float: right;" onclick="DisplayMap()" title="Add/View Item"></i>
                            }

                            <label id="lat" style="display:none">@item.CustomerLat</label>
                            <label id="longt" style="display:none">@item.CustomerLog</label>
                            <br />
                            <hr />
                            <h6><span>@item.Type</span> </h6>
                            <h6><span>Priority:@item.Priority</span></h6>

                            <h6><span>Requested:@item.RequestedName </span></h6>
                            <span>@item.RequestedDate.Value.ToString("dd-MMM-yyyy")</span>
                            <hr />
                            @item.Description
                            <hr />
                            <div class="mt-3">
                                <span class="text-muted d-block"><i class="fa fa-user-circle" aria-hidden="true"></i> @item.CustomerName</span>
                                <span class="text-muted d-block"><i class="fa fa-home" aria-hidden="true"></i> <a href="#" class="text-muted">@item.CustomerAddress</a></span>
                                <span class="text-muted d-block"><i class="fa fa-phone" aria-hidden="true"></i> <a href="tel:@item.CustomerPinCode">@item.CustomerPinCode</a> </span>
                            </div>
                            <hr />
                            <div class="mt-3">

                                @if (item.JobStartDate == null && (item.Status == "Open" || item.Status == "Inprogress"))
                                {

                                    <a onclick="startJobDetail(@item.Id)" class="btn btn-primary">
                                        Start Job
                                    </a>

                                }
                                else
                                {
                                    <div class="row">
                                        <div class="col-6">
                                            <a class="btn btn-link" data-toggle="collapse" href="#paused" role="button" aria-expanded="false" aria-controls="collapseExample" style="padding:0px">
                                                Paused Details
                                            </a>
                                        </div>
                                        <div class="col-6">
                                            <a class="btn btn-link" data-toggle="collapse" href="#resumed" role="button" aria-expanded="false" aria-controls="collapseExample" style="padding:0px">
                                                Resumed Details
                                            </a>
                                        </div>
                                    </div>

                                    <div class="collapse" id="paused">

                                        <div class="card card-body">
                                            <h6>Paused Details</h6>
                                            <hr />
                                            @if (Model.Pausedlist == null || Model.Pausedlist.Count == 0)
                                            {
                                                <center>No Paused Details Found</center>
                                            }
                                            else
                                            {
                                                foreach (var item1 in Model.Pausedlist)
                                                {
                                                    <h6><span>@item1.PausedDate </span></h6>
                                                    <span>@item1.PausedRemark </span>
                                                    <hr />
                                                }
                                            }

                                        </div>
                                    </div>
                                    <div class="collapse" id="resumed">
                                        <div class="card card-body">
                                            <h6>Resumed Details</h6>
                                            <hr />
                                            @if (Model.Resumedlist == null || Model.Resumedlist.Count == 0)
                                            {
                                                <center>No Resumed Details Found</center>
                                            }
                                            else
                                            {
                                                foreach (var item1 in Model.Resumedlist)
                                                {
                                                    <h6><span>@item1.ResumeDate </span></h6>
                                                    <span>@item1.ResumeRemark </span>
                                                    <hr />
                                                }
                                            }

                                        </div>
                                    </div>
                                    <hr />
                                    if ((item.Status == "Open" || item.Status == "Paused" || item.Status == "Inprogress" || item.JobStatus == "Resumed"))
                                    {

                                        <h6><span>Start Date:@item.JobStartDate </span></h6>

                                        if (item.JobStatus == "Resumed" || item.Status == "Inprogress")
                                        {

                                            @Html.TextAreaFor(m => m.HoldRemark, new { @class = "form-control txtmargin", placeholder = "Paused Remark", required = "required" })
                                        }
                                        else if (item.JobStatus == "Paused")
                                        {
                                            <i style="font-size: 24px; cursor: pointer;margin-bottom:15px;" class="fa" onclick="FileUpload()" title="File Upload">&#xf0c6;</i>
                                            <i class="fa fa-shopping-cart" aria-hidden="true" style="font-size: 24px; cursor: pointer; margin-bottom: 15px; float: right;" onclick="DisplayAddItem()" title="Add/View Item"></i>
                                            <i class="fa fa-cogs" aria-hidden="true" style="font-size: 20px; cursor: pointer; margin-bottom: 15px; float: right; margin-right: 114px;" onclick="DisplayAddAsset()" title="Add/View Asset"></i>
                                            @Html.TextAreaFor(m => m.HoldRemark, new { @class = "form-control txtmargin", placeholder = "Resume Remark", required = "required" })
                                        }


                                    }

                                    if ((item.JobStatus == "Paused" || item.JobStatus == "Resumed" || item.Status == "Inprogress"))
                                    {
                                        if (item.JobStatus == "Paused")
                                        {<br />
                                            <br />
                                            @*@Html.TextAreaFor(m => m.customerReview, new { @class = "form-control txtmargin", placeholder = "Customer Review", required = "required" })
                    <br />
                    <a onclick="endJobDetail(@item.Id)" class="btn btn-primary">
                        End Job
                    </a>*@
                                            <a onclick="ResumeJobDetail(@item.Id)" class="btn btn-primary">
                                                Resume Job
                                            </a>
                                        }
                                        else if (item.JobStatus == "Resumed" || item.Status == "Inprogress")
                                        {<br />
                                            <i style="font-size: 24px; cursor: pointer;margin-bottom:15px;" class="fa" onclick="FileUpload()" title="File Upload">&#xf0c6;</i>
                                            <button type="button" class="btn btn-primary" onclick="FileUpload()" style="margin-bottom:10px;display:none">
                                                Add/View Upload
                                            </button>


                                            <i class="fa fa-shopping-cart" aria-hidden="true" style="font-size: 24px; cursor: pointer; margin-bottom: 15px;float:right;" onclick="AddItem()" title="Add/View Item"></i>
                                            <i class="fa fa-cogs" aria-hidden="true" style="font-size: 20px; cursor: pointer; margin-bottom: 15px; float: right; margin-right: 114px;" onclick="AddAsset()" title="Add/View Asset"></i>
                                            <button type="button" class="btn btn-primary" onclick="AddItem()" style="display:none;float:right;margin-bottom:10px;">
                                                Add/View Item
                                            </button>

                                            @Html.TextAreaFor(m => m.customerReview, new { @class = "form-control txtmargin", placeholder = "Customer Review", required = "required" })
                                            <br />
                                            <a onclick="endJobDetail(@item.Id)" class="btn btn-primary">
                                                End Job
                                            </a>
                                            <a onclick="holdJobDetail(@item.Id)" class="btn btn-primary">
                                                Paused Job
                                            </a>
                                        }


                                    }
                                    else
                                    {
                                        <h6><span>Start Date : @item.JobStartDate </span></h6>
                                        <h6><span>End Date   : @item.JobEndDate </span></h6>
                                        <hr />
                                        <i style="font-size: 24px; cursor: pointer;margin-bottom:15px;" class="fa" onclick="FileUpload()" title="File Upload">&#xf0c6;</i>
                                        <i class="fa fa-shopping-cart" aria-hidden="true" style="font-size: 24px; cursor: pointer; margin-bottom: 15px; float: right;" onclick="DisplayAddItem()" title="Add/View Item"></i>
                                        <i class="fa fa-cogs" aria-hidden="true" style="font-size: 20px; cursor: pointer; margin-bottom: 15px; float: right; margin-right: 114px;" onclick="DisplayAddAsset()" title="Add/View Asset"></i>
                                        <button type="button" class="btn btn-primary" onclick="DisplayAddItem()" style="float:right;margin-bottom:10px;display:none">
                                            Add/View Item
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="DisplayAddAsset()" style="float:right;margin-bottom:10px;display:none">
                                            Add/View Asset
                                        </button>
                                        <h6><span>CustomerReview</span></h6>
                                        <textarea class="form-control" readonly>@item.CustomerReview</textarea>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div><!--end col-->

                <div class="modal" id="ItemModal">
                    <div class="modal-dialog">
                        <div class="modal-content">



                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Item Details</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <input type="text" id="txtid" style="display:none" />
                                <input type="number" class="form-control" placeholder="Quantity" id="txtQty" /><br />
                                <textarea class="form-control" placeholder="Description" id="txtDesc"></textarea>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">

                                <button type="button" class="btn btn-primary" id="btnItemSave" onclick="ItemSave(@item.Id,'@item.JobId')">Save</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                            </div>
                            <table class="table table-hover">
                                <thead>
                                    <tr>

                                        <th scope="col">Action</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Specification</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var a in Model.ItemList)
                                    {
                                        <tr>
                                            <td>
                                                <ul class="list-inline m-0">

                                                    <li class="list-inline-item">
                                                        <button class="btnEdit btn btn-success btn-sm rounded-0" type="button" id="btnedit" data-toggle="tooltip" data-placement="top" value="@a.id" title="Edit" style="padding:5px!important"><i class="fa fa-edit"></i></button>
                                                    </li>
                                                    <li class="list-inline-item">
                                                        <button class="btnDelete btn btn-danger btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" value="@a.id" title="Delete" style="padding:5px!important"><i class="fa fa-trash"></i></button>
                                                    </li>
                                                </ul>
                                            </td>
                                            <td>@a.Qty</td>
                                            <td>@a.Specification</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="modal" id="AssetModal">
                    <div class="modal-dialog">
                        <div class="modal-content">



                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Asset Details</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <select class="form-control" id="AssetList">
                                    @foreach (var a in Model.AssetList)
                                    {
                                        <option value='@a.Description#@a.AssetID'>@a.Description</option>

                                    }
                                </select>
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">

                                <button type="button" class="btn btn-primary" id="btnItemSave" onclick="AssetSave('@item.JobId','@item.Id')">Save</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                            </div>
                            @if (Model.WorkOrderHeader[0].AssetDescription != "")
                            {
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th scope="col">Asset</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var a in Model.WorkOrderHeader)
                                        {
                                            if (a.AssetId != "")
                                            {
                                                <tr>
                                                    <td>@a.AssetDescription</td>
                                                </tr>
                                            }

                                        }
                                    </tbody>
                                </table>
                            }

                        </div>
                    </div>
                </div>
                <div class="modal" id="DisplayAssetModal">
                    <div class="modal-dialog">
                        <div class="modal-content">



                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Asset Details</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                @if (Model.WorkOrderHeader[0].AssetDescription != "")
                                {
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th scope="col">Asset</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var a in Model.WorkOrderHeader)
                                            {
                                                if (a.AssetId != "")
                                                {
                                                    <tr>
                                                        <td>@a.AssetDescription</td>
                                                    </tr>
                                                }

                                            }
                                        </tbody>
                                    </table>
                                }
                            </div>

                         

                        </div>
                    </div>
                </div>


                <div class="modal" id="DisplayItemModal">
                    <div class="modal-dialog">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Item Details</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>


                            <table class="table table-hover">
                                <thead>
                                    <tr>


                                        <th scope="col">Quantity</th>
                                        <th scope="col">Specification</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var a in Model.ItemList)
                                    {
                                        <tr>

                                            <td>@a.Qty</td>
                                            <td>@a.Specification</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <div class="modal" id="DisplayMap">
                    <div class="modal-dialog">
                        <div class="modal-content" style="overflow:auto">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Google Map</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <iframe id="MyFrame" height="450" width="600"></iframe>

                        </div>
                    </div>
                </div>

                <div class="modal" id="FileUploadModal">
                    <div class="modal-dialog">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">File Upload Details</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            @if (item.JobStatus == "Resumed" || item.Status == "Inprogress")
                            {
                                <!-- Modal body -->
                                <div class="modal-body">

                                    <input type="file" id="txtFile" /><br />

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">

                                    <button type="button" class="btn btn-primary" id="btnupload" value="@item.Id" onclick="FileSave('@item.Id')">Save</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>}
                            <table class="table table-hover">
                                <thead>
                                    <tr>

                                        <th scope="col">Action</th>
                                        <th scope="col">File Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var a in Model.FileList)
                                    {
                                        <tr>
                                            <td>
                                                <ul class="list-inline m-0">

                                                    <li class="list-inline-item">

                                                        <button class="btn btn-success btn-sm rounded-0" style="padding:5px!important" type="button" id="btndownload" onclick="Filedownload('@a.filename')" data-toggle="tooltip" data-placement="top" value="@a.id" title="Edit"><i class="fa fa-download"></i></button>
                                                        @if (item.JobStatus == "Resumed" || item.Status == "Inprogress")
                                                        {
                                                            <button class="btn btn-danger btn-sm rounded-0" style="padding:5px!important" type="button" id="btnDelete" onclick="FileDelete('@a.id')" data-toggle="tooltip" data-placement="top" value="@a.id" title="Edit"><i class="fa fa-trash"></i></button>
                                                        }
                                                    </li>
                                                </ul>
                                            </td>
                                            <td>@a.filename</td>

                                        </tr>

                                    }
                                </tbody>
                            </table>



                        </div>
                    </div>
                </div>
            }



            <div class="col-12 mt-4 pt-2 d-block d-md-none text-center">

            </div><!--end col-->
        </div><!--end row-->
    </div>




    <style>
        body {
            margin-top: 20px;
            /*background-repeat: no-repeat;*/
            background-image: linear-gradient(rgb(104, 145, 162), rgb(12, 97, 33));
        }

        .shadow {
            box-shadow: 0 0 3px rgb(53 64 78 / 20%) !important;
        }

        .rounded {
            border-radius: 5px !important;
        }

        .bg-light {
            background-color: #f7f8fa !important;
        }

        .bg-primary, .btn-primary, .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active, .btn-outline-primary.active, .btn-outline-primary.focus, .btn-outline-primary:not(:disabled):not(.disabled):active, .badge-primary, .nav-pills .nav-link.active, .pagination .active a, .custom-control-input:checked ~ .custom-control-label:before, #preloader #status .spinner > div, .social-icon li a:hover, .back-to-top:hover, .back-to-home a, ::selection, #topnav .navbar-toggle.open span:hover, .owl-theme .owl-dots .owl-dot.active span, .owl-theme .owl-dots.clickable .owl-dot:hover span, .watch-video a .play-icon-circle, .sidebar .widget .tagcloud > a:hover, .flatpickr-day.selected, .flatpickr-day.selected:hover, .tns-nav button.tns-nav-active, .form-check-input.form-check-input:checked {
            background-color: #6dc77a !important;
        }

        .badge {
            padding: 5px 8px;
            border-radius: 3px;
            letter-spacing: 0.5px;
            font-size: 12px;
        }

        .btn-primary, .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active, .btn-outline-primary.active, .btn-outline-primary.focus, .btn-outline-primary:not(:disabled):not(.disabled):active {
            box-shadow: 0 3px 7px rgb(109 199 122 / 50%) !important;
        }

        .btn-primary, .btn-outline-primary, .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active, .btn-outline-primary.active, .btn-outline-primary.focus, .btn-outline-primary:not(:disabled):not(.disabled):active, .bg-soft-primary .border, .alert-primary, .alert-outline-primary, .badge-outline-primary, .nav-pills .nav-link.active, .pagination .active a, .form-group .form-control:focus, .form-group .form-control.active, .custom-control-input:checked ~ .custom-control-label:before, .custom-control-input:focus ~ .custom-control-label::before, .form-control:focus, .social-icon li a:hover, #topnav .has-submenu.active.active .menu-arrow, #topnav.scroll .navigation-menu > li:hover > .menu-arrow, #topnav.scroll .navigation-menu > li.active > .menu-arrow, #topnav .navigation-menu > li:hover > .menu-arrow, .flatpickr-day.selected, .flatpickr-day.selected:hover, .form-check-input:focus, .form-check-input.form-check-input:checked, .container-filter li.active, .container-filter li:hover {
            border-color: #6dc77a !important;
        }

            .bg-primary, .btn-primary, .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active, .btn-outline-primary.active, .btn-outline-primary.focus, .btn-outline-primary:not(:disabled):not(.disabled):active, .badge-primary, .nav-pills .nav-link.active, .pagination .active a, .custom-control-input:checked ~ .custom-control-label:before, #preloader #status .spinner > div, .social-icon li a:hover, .back-to-top:hover, .back-to-home a, ::selection, #topnav .navbar-toggle.open span:hover, .owl-theme .owl-dots .owl-dot.active span, .owl-theme .owl-dots.clickable .owl-dot:hover span, .watch-video a .play-icon-circle, .sidebar .widget .tagcloud > a:hover, .flatpickr-day.selected, .flatpickr-day.selected:hover, .tns-nav button.tns-nav-active, .form-check-input.form-check-input:checked {
                background-color: #6dc77a !important;
            }

        .btn {
            padding: 8px 20px;
            outline: none;
            text-decoration: none;
            font-size: 16px;
            letter-spacing: 0.5px;
            transition: all 0.3s;
            font-weight: 600;
            border-radius: 5px;
        }

        .btn-primary {
            background-color: #6dc77a !important;
            border: 1px solid #6dc77a !important;
            color: #fff !important;
            box-shadow: 0 3px 7px rgb(109 199 122 / 50%);
        }

        a {
            text-decoration: none;
        }

        textarea {
            resize: none;
        }
    </style>

    <script>
        var lat, longt;
        var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        };

        function success(pos) {
            var crd = pos.coords;
            lat = 19.09366164253359;
            longt = 73.28586756441777;

        }

        function error(err) {
            console.warn(`ERROR(${err.code}): ${err.message}`);
        }


        function newSrc() {
            debugger;

            navigator.geolocation.getCurrentPosition(success, error, options);
            var l = 19.216467114317734;
            var lo = 72.97982520558605;
            l = document.getElementById("lat").textContent;
            lo = document.getElementById("longt").textContent;
            var newSrc = "https://maps.google.com/maps?q=" + l + "," + lo + "&z=16&output=embed";
            document.getElementById("MyFrame").src = newSrc;
        }
    </script>
    <script type="text/javascript">

        $(".btnEdit").click(function () {
            debugger;
            var fired_button = $(this).val();

            var currentRow = $(this).closest("tr");;

            var col1 = currentRow.find("td:eq(0)").text();
            var col2 = currentRow.find("td:eq(1)").text();
            var col3 = currentRow.find("td:eq(2)").text();


            $('#txtid').val(fired_button);
            $('#txtDesc').val(col3);
            $('#txtQty').val(col2);


           // alert(fired_button);
        });

        $(".btnDelete").click(function () {
            debugger;
            var fired_button = $(this).val();
            var id1 = $("#TrId").val();
            var url = '@Url.Action("AddItemDetails", "JobDetail")' + '?id=' + id1 + '&qty=&description=&code=&updateid=&deleteid=' + fired_button;
        window.location.href = url;


            // alert(fired_button);
        });

        $(document).ready(function () {
            document.getElementById('HoldRemark').value = "";
            newSrc();

        });

        function AddItem() { $('#ItemModal').modal('show'); }
        function AddAsset() { $('#AssetModal').modal('show'); }

        function FileUpload() { $('#FileUploadModal').modal('show'); }

        function DisplayAddItem() { $('#DisplayItemModal').modal('show'); }
        function DisplayAddAsset() { $('#DisplayAssetModal').modal('show'); }
        function DisplayMap() { newSrc(); $('#DisplayMap').modal('show'); }

    function endJobDetail(jobId) {
        var jobDescription = document.getElementById('customerReview').value;
        if (jobDescription == "") {
            Swal.fire({
                title: "Job Alert!",
                text: "Customer Review Mandatory...!",
                icon: "info"
            });
        }
        else {

        var url = '@Url.Action("EndJobDetail", "JobDetail")' + '?id=' + jobId + '&customerReview=' + encodeURIComponent(jobDescription);
        window.location.href = url;
        }
        }
        function startJobDetail(jobId) {

            if (jobId == 15 || jobId == 10 || jobId ==12) {
                 Swal.fire({
                    title: "Job Alert!",
                    text: "Can not start the Job.You are not in radius...!",
                     icon: "info"
                });
            }
            else {

        var url = '@Url.Action("StartJobDetail", "JobDetail")' + '?id=' + jobId;
        window.location.href = url;
            }

        }
        function holdJobDetail(jobId) {

            var HoldRemark = document.getElementById('HoldRemark').value;
            if (HoldRemark == "") {
                 Swal.fire({
                    title: "Job Alert!",
                     text: "Paused Remark Mandatory...!",
                     icon: "info"
                });
            }
            else {

                var url = '@Url.Action("HoldJobDetail", "JobDetail")' + '?id=' + jobId + '&HoldRemark=' + encodeURIComponent(HoldRemark);
        window.location.href = url;
            }
            $("#HoldRemark").value = "";

        }

        function ResumeJobDetail(jobId) {

            var HoldRemark = document.getElementById('HoldRemark').value;
            if (HoldRemark == "") {
                 Swal.fire({
                    title: "Job Alert!",
                     text: "Resume Remark Mandatory...!",
                     icon: "info"
                });
            }
            else {

                var url = '@Url.Action("ResumeJobDetail", "JobDetail")' + '?id=' + jobId + '&HoldRemark=' + encodeURIComponent(HoldRemark);
        window.location.href = url;
            }


            }
        function AssetSave(code,id) {
            debugger;
            var selectElement =
                document.querySelector('#AssetList');
            var output = selectElement.value;
            const myArray = output.split("#");
            var url = '@Url.Action("AddAssetDetails", "JobDetail")' + '?AssetDescription=' + myArray[0] + '&AssetId=' + myArray[1] + '&code=' + code + '&id=' + id + '';
        window.location.href = url;
        }
        function ItemSave(Id,code) {

            debugger;

            var qty = $("#txtQty").val();
            var description = $("#txtDesc").val();
            if ($("#txtid").val() != "") {
                var id1 =  $("#txtid").val();
                var url = '@Url.Action("AddItemDetails", "JobDetail")' + '?id=' + Id + '&qty=' + qty + '&description=' + description + '&code=' + code + '&updateid=' + id1 + '&deleteid=';
        window.location.href = url;
            }
            else {
                var id1 = "";
                var url = '@Url.Action("AddItemDetails", "JobDetail")' + '?id=' + Id + '&qty=' + qty + '&description=' + description + '&code=' + code + '&updateid=' + id1 + '&deleteid=';
        window.location.href = url;
            }


        }


        $("#HoldRemark").value = "";

    </script>

    <script>

        function Filedownload(name) {
             var url = '@Url.Action("download", "JobDetail")' + '?name=' + name+'&id=';
        window.location.href = url;

        }
        function FileDelete(id) {
            var id1 = $("#TrId").val();
            var url = '@Url.Action("FileDelete", "JobDetail")' + '?did=' + id + '&id=' + id1;

            Swal.fire({
                title: "Success!",
                text: "File Deleted Succesfully...!",
                icon: "success"
            });

        window.location.href = url;

        }
        function FileSave(code) {
            var input = document.getElementById("txtFile");
            var files = input.files;
            var formData = new FormData();

            for (var i = 0; i != files.length; i++) {
                formData.append("files", files[i]);
            }

            formData.append("id", $("#btnupload").val());
            $.ajax(
                {
                    url: "/JobDetail/Upload",
                    data: formData,
                    processData: false,
                    contentType: false,
                    type: "POST",
                    success: function (data) {

                        Swal.fire({
                            title: "Success!",
                            text: "File Uploaded...!",
                            icon: "success"
                        });

                        $('#FileUploadModal').modal('hide');
                        location.reload();
                    }
                }
            );
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
}
